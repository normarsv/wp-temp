!function($){function t(t){var i=JSON.parse(wtbx_typography_field.object),e=t.find('.wtbx_typography_select[data-param="font_family"] option:selected').val(),n=t.find(".wtbx_typography_value").val();""!==n&&(n=JSON.parse(t.find(".wtbx_typography_value").val()));var c="",r="",p="",l=[];if(void 0!==e&&null!==e&&e.length>0){var o=i[e].variants,s=i[e].subsets;if(l=void 0!==o&&null!==o&&o.length>0?o:a(),void 0!==s&&null!==s&&s.length>0)for(var _=0;_<s.length;_++)p+='<option value="'+s[_]+'"'+(s[_]===n.subsets?'selected="selected"':"")+">"+s[_]+"</option>"}else l=a();for(var f=0;f<l.length;f++){c=l[f],-1!==c.indexOf("_italic")&&(c=c.replace("_"," "));var h=""!==n.variants?n.variants:"";r+='<option value="'+("inherit"===l[f]?"":l[f])+'"'+(l[f]===h?' selected="selected"':"")+">"+c+"</option>"}t.find('.wtbx_typography_select[data-param="variants"]').html(r),t.find('.wtbx_typography_select[data-param="subsets"]').html(p)}function a(){return["inherit","100","100_italic","200","200_italic","300","300_italic","400","400_italic","500","500_italic","600","600_italic","700","700_italic","800","800_italic","900","900_italic"]}function i(t){var a={},i="";t.find(".wtbx_typography_select").each(function(){var t=$(this).data("param"),i=$(this).find("option:selected").val();void 0===i&&(i=""),a[t]=i,""===a[t]&&delete a[t]}),t.find(".wtbx_typography_input").each(function(){var t=$(this).data("param"),i=parseFloat($(this).val().replace(/([^\-0-9\.,])/i,""),10),e=$(this).data("units");isNaN(i)?a[t]="":a[t]=i+e,""===a[t]&&delete a[t]}),i=$.isEmptyObject(a)?"":JSON.stringify(a),t.find(".wtbx_typography_value").val(i),e(t,a)}function e(t,a){if(t.find(".wtbx_typography_preview_inner").length){var i=["",""];$.isEmptyObject(a.variants)||(-1!==a.variants.indexOf("_italic")?i=a.variants.split("_"):i[0]=a.variants);var e=t.find('.wtbx_typography_select[data-param="font_family"] option:selected').text()||"",n=a.font_size||"",c=a.transform||"",r=a.line_height||"",p=a.letter_spacing||"",l=i[0]||"",o=i[1]||"";t.find(".wtbx_typography_preview_inner").css({"font-family":e,"font-weight":l,"font-style":o,"text-transform":c,"font-size":n,"line-height":r,"letter-spacing":p})}else t.find(".wtbx_typography_preview_inner").removeAttr("style")}$(document).ready(function(){$(".wtbx_typography_wrapper").each(function(){var a=$(this);t(a),i(a),a.find('.wtbx_typography_select[data-param="font_family"]').change(function(){t(a),i(a)}),a.find(".wtbx_typography_unit").on("click",function(){$(this).hasClass("active")||($(this).closest(".wtbx_typography_units").find(".active").removeClass("active"),$(this).addClass("active"),$(this).closest(".wtbx_typography_param_wrap").find(".wtbx_typography_input").data("units",$(this).data("units")),i(a))}),a.find(".wtbx_typography_select").change(function(){i(a)}),a.find(".wtbx_typography_input").on("change input",function(){i(a)}),a.find(".wtbx_typography_clear").on("click",function(){a.find(".wtbx_typography_select, .wtbx_typography_input").each(function(){$(this).val("")}),i(a)})})})}(jQuery);